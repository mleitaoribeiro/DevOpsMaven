@startuml

skinparam DefaultFontSize 20

create ":Test"

==Arrange==

create ":MemberGetsTransactionsOfAnAccountInDateRangeController"
":Test" -> ":MemberGetsTransactionsOfAnAccountInDateRangeController" : new MemberGetsTransactionsOfAnAccountInDateRangeController

participant "group1:Group"

participant "ledger:Ledger"
deactivate ":MemberGetsTransactionsOfAnAccountInDateRangeController" #FFBBBB

== Act ==

":Test" -> ":MemberGetsTransactionsOfAnAccountInDateRangeController" : getOneAccountMovementsFromGroup\n(account, initialDate, finalDate, group1, person)
activate ":MemberGetsTransactionsOfAnAccountInDateRangeController" #FFBBBB
":MemberGetsTransactionsOfAnAccountInDateRangeController" -> "group1:Group" : getOneAccountMovementsFromGroup\n(account, initialDate, finalDate, person)
activate "group1:Group" #FFBBBB

"group1:Group" -> "group1:Group" : isGroupMember(person)

"group1:Group" -> "ledger:Ledger" : getTransactionsInDateRange(initialDate, finalDate)
activate "ledger:Ledger" #FFBBBB
"ledger:Ledger" --> "group1:Group" : listOfTransactionsFromPeriod

"group1:Group" -> "ledger:Ledger" : getMovementsFromOneAccount (account, listOfTransactionsFromPeriod)
"ledger:Ledger" --> "group1:Group" : listOfTransactions
deactivate "ledger:Ledger" #FFBBBB
"group1:Group" --> ":MemberGetsTransactionsOfAnAccountInDateRangeController" : listOfTransactions
deactivate "group1:Group" #FFBBBB
":MemberGetsTransactionsOfAnAccountInDateRangeController" --> ":Test" : listOfTransactions
deactivate ":MemberGetsTransactionsOfAnAccountInDateRangeController" #FFBBBB

== Assert ==

":Test" -> ":Test" : assertEquals(expectedTransactions, listOfTransactions)

@enduml